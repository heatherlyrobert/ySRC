#!/usr/local/bin/koios
#   koios-polos (axis of heaven) unit testing meta-language



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  -  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  t  ========(var)======= 
PREP          include the prototype headers                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       include public header                ySRC.h                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       include private header               ySRC_priv.h                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  -  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  t  ========(var)======= 
SCRP    [è1]  (SUNDO) verify detailed sundo add and purge                        ysrc_sundo_add, ysrc_sundo_trim, ysrc_sundo_status                                                    ((04.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the testing environment                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        ysrc__unit_quiet                                                                                                                  i_equal     0                                                                                                    
     get      ... check undo queue                 ySRC__unit                  "undo"        , 0                                                                                     s_equal     SRC undo ( 0/-1) : åæ                                                                               

   COND       add an undo entry                                                  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     create new entry                     ysrc_sundo_add              '·'           , 'h'            , 5              , 'a'            , 'Z'                                i_equal     0                                                                                                    
     get      ... check undo queue                 ySRC__unit                  "undo"        , 0                                                                                     s_equal     SRC undo ( 1/ 0) : å··h5aZ,æ                                                                        

   COND       purge all entries                                                  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     remove above                         ysrc_sundo_trim             0                                                                                                     i_equal     0                                                                                                    
     get      ... check undo queue                 ySRC__unit                  "undo"        , 0                                                                                     s_equal     SRC undo ( 0/-1) : åæ                                                                               

   COND       re-add an undo entry                                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     create new entry                     ysrc_sundo_add              '·'           , 'h'            , 5              , 'a'            , 'Z'                                i_equal     0                                                                                                    
     get      ... check undo queue                 ySRC__unit                  "undo"        , 0                                                                                     s_equal     SRC undo ( 1/ 0) : å··h5aZ,æ                                                                        

   COND       verify adding another                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     create new entry                     ysrc_sundo_add              'd'           , 'l'            , 8              , '-'            , '·'                                i_equal     0                                                                                                    
     get      ... check undo queue                 ySRC__unit                  "undo"        , 0                                                                                     s_equal     SRC undo ( 2/ 1) : å··h5aZ,·dl8-·,æ                                                                 

   COND       verify adding another                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     create new entry                     ysrc_sundo_add              'c'           , 'j'            , 9              , '·'            , 'K'                                i_equal     0                                                                                                    
     get      ... check undo queue                 ySRC__unit                  "undo"        , 0                                                                                     s_equal     SRC undo ( 3/ 2) : å··h5aZ,·dl8-·,·cj9·K,æ                                                          

   COND       purge after first                                                  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     remove above                         ysrc_sundo_trim             1                                                                                                     i_equal     0                                                                                                    
     get      ... check undo queue                 ySRC__unit                  "undo"        , 0                                                                                     s_equal     SRC undo ( 1/ 0) : å··h5aZ,æ                                                                        

   COND       add back last                                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     create new entry                     ysrc_sundo_add              'c'           , 'j'            , 9              , '·'            , 'K'                                i_equal     0                                                                                                    
     get      ... check undo queue                 ySRC__unit                  "undo"        , 0                                                                                     s_equal     SRC undo ( 2/ 1) : å··h5aZ,·cj9·K,æ                                                          

   COND       add back middle                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     create new entry                     ysrc_sundo_add              'd'           , 'l'            , 8              , '-'            , '·'                                i_equal     0                                                                                                    
     get      ... check undo queue                 ySRC__unit                  "undo"        , 0                                                                                     s_equal     SRC undo ( 3/ 2) : å··h5aZ,·cj9·K,·dl8-·,æ                                                          

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.016))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     stop testing                         ysrc__unit_end                                                                                                                    i_equal     0                                                                                                    
     get      ... check undo queue                 ySRC__unit                  "undo"        , 0                                                                                     s_equal     SRC undo ( 0/-1) : åæ                                                                               



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  -  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  t  ========(var)======= 
SCRP    [è1]  (SUNDO) verify detailed grouping of undos                          ysrc_sundo_beg, ysrc_sundo_end                                                                        ((04.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the testing environment                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        ysrc__unit_quiet                                                                                                                  i_equal     0                                                                                                    
     get      ... check undo queue                 ySRC__unit                  "undo"        , 0                                                                                     s_equal     SRC undo ( 0/-1) : åæ                                                                               

   COND       add a single entry                                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     update sequence                      ysrc_sundo_beg                                                                                                                    i_equal     0                                                                                                    
     exec     create new entry                     ysrc_sundo_add              '·'           , 'h'            , 5              , 'a'            , 'Z'                                i_equal     0                                                                                                    
     exec     finish sequence                      ysrc_sundo_end                                                                                                                    i_equal     0                                                                                                    
     get      ... check undo queue                 ySRC__unit                  "undo"        , 0                                                                                     s_equal     SRC undo ( 1/ 0) : å0·h5aZ,æ                                                                        

   COND       add a double entry                                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     update sequence                      ysrc_sundo_beg                                                                                                                    i_equal     0                                                                                                    
     exec     create new entry                     ysrc_sundo_add              'c'           , 'j'            , 9              , '·'            , 'K'                                i_equal     0                                                                                                    
     exec     create new entry                     ysrc_sundo_add              'd'           , 'l'            , 8              , '-'            , '·'                                i_equal     0                                                                                                    
     exec     finish sequence                      ysrc_sundo_end                                                                                                                    i_equal     0                                                                                                    
     get      ... check undo queue                 ySRC__unit                  "undo"        , 0                                                                                     s_equal     SRC undo ( 3/ 2) : å0·h5aZ,1cj9·K,1dl8-·,æ                                                          

   COND       purge last one                                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     remove above                         ysrc_sundo_trim             2                                                                                                     i_equal     0                                                                                                    
     get      ... check undo queue                 ySRC__unit                  "undo"        , 0                                                                                     s_equal     SRC undo ( 2/ 1) : å0·h5aZ,1cj9·K,æ                                                                 

   COND       add a double entry (seq does not fall-back)                        - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     update sequence                      ysrc_sundo_beg                                                                                                                    i_equal     0                                                                                                    
     exec     create new entry                     ysrc_sundo_add              'x'           , 'k'            , 5              , 'i'            , '·'                                i_equal     0                                                                                                    
     exec     create new entry                     ysrc_sundo_add              'x'           , 'h'            , 5              , 'x'            , '·'                                i_equal     0                                                                                                    
     exec     finish sequence                      ysrc_sundo_end                                                                                                                    i_equal     0                                                                                                    
     get      ... check undo queue                 ySRC__unit                  "undo"        , 0                                                                                     s_equal     SRC undo ( 4/ 3) : å0·h5aZ,1cj9·K,2xk5i·,2xh5x·,æ                                                   

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((04.016))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     stop testing                         ysrc__unit_end                                                                                                                    i_equal     0                                                                                                    
     get      ... check undo queue                 ySRC__unit                  "undo"        , 0                                                                                     s_equal     SRC undo ( 0/-1) : åæ                                                                               



